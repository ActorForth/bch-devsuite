<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BCH DevSuite | Documentation</title>
  </head>
  <body>
    <h1>About</h1>
<p>This repo intends to be a toolkit for running a local version of a Bitcoin Unlimited for development and testing purposes. Currently it provides a self-hosted local node, indexer (Electrs), a drop-in Ninsight replacement (Opensight), a regtest version of the rest.bitcoin.com REST APIs, an instance of SLPDB for token querying.</p>
<h1>Prerequisites</h1>
<p>To run this node, you must have the follow software installed on your local machine:</p>
<ul>
<li>Docker (including docker-compose)</li>
<li>Python 3</li>
<li>Virtualenv</li>
<li>Openssl</li>
<li>Git</li>
</ul>
<h1>Getting started</h1>
<h3>1. Cloning this repository.</h3>
<pre><code class="language-bash">git clone https://github.com/ActorForth/bch-toolkit.git
cd ./bch-toolkit
</code></pre>
<h3>2. Setup infrastructure.</h3>
<p>This will check that the necessary software is installed, and then it will download and prepare the docker containers. For a full list of options, run ./setup with no arguments to see its usage.</p>
<p><strong>NOTE:</strong> If you wish to have any custom changes applied to the Bitcoin Unlimited, or REST API services, be sure to apply those changes within the <em>bitcoin.conf</em>, <em>fulcrum-config.conf</em>, or <em>restapi-config.sh</em> files, respectively, before executing the setup script. Bitcoin Cash Node can alternatively be used with fulcrum, by commenting out bitcoin unlimited and uncommenting bitcoin cash node and fulcrum. These can not currently run simultaneously, and one or the other must be used.</p>
<pre><code class="language-bash">./setup {network} {bu or bchn} {slp} {bchrest or bchapi} {expose-ports}
# First we select a network, which must be regtest, mainnet or testnet
# Next we specify the node, bitcoin unlimited or bitcoincash node
# Slp is optional, selecting this option enables slpdb, slpserve and mongodb
# Next we select a rest interface, bchrest is a fork of the rest.bitcoin.com api, while bchapi is a rest utilized with the bch-js library
# Lastly, we specify whether or not the ports will be exposed on the docker containers.
</code></pre>
<p><strong>NOTE:</strong> A RPC password and username prompt will appear for the node, these values will be stored in a pass.conf file. Subsequent setups will utilize these values, however changing these values while an existing toolkit is deployed may cause errors.</p>
<p><strong>NOTE:</strong> The SLP option will prompt the user to input a MONGODB username and password, this is to prevent external parties from modifying your database if the ports are exposed.</p>
<h3>3. Running infrastructure.</h3>
<p>Execute the <em>services</em> script to start the node, indexer, rest API, and/or SLPDB (depending which ones chose in the <em>setup</em> script).</p>
<pre><code class="language-bash">./services start
</code></pre>
<h3>4. Testing.</h3>
<pre><code class="language-bash">./bitcoin-cli getblockchaininfo
</code></pre>
<p>Expected result</p>
<pre><code>{
  &quot;chain&quot;: &quot;regtest&quot;,
  &quot;blocks&quot;: 200,
  &quot;headers&quot;: 200,
  &quot;bestblockhash&quot;: &quot;0714183b15ac3757e35152fadbc0fd2d73ec97c4d9e1ee486882b18da8b256ca&quot;,
  &quot;difficulty&quot;: 4.656542373906925e-10,
  &quot;mediantime&quot;: 1614598375,
  &quot;verificationprogress&quot;: 1,
  &quot;initialblockdownload&quot;: false,
  &quot;chainwork&quot;: &quot;0000000000000000000000000000000000000000000000000000000000000192&quot;,
  &quot;size_on_disk&quot;: 48350,
  &quot;pruned&quot;: false,
  &quot;softforks&quot;: [
    {
      &quot;id&quot;: &quot;bip34&quot;,
      &quot;version&quot;: 2,
      &quot;reject&quot;: {
        &quot;status&quot;: false
      }
    },
    {
      &quot;id&quot;: &quot;bip66&quot;,
      &quot;version&quot;: 3,
      &quot;reject&quot;: {
        &quot;status&quot;: false
      }
    },
    {
      &quot;id&quot;: &quot;bip65&quot;,
      &quot;version&quot;: 4,
      &quot;reject&quot;: {
        &quot;status&quot;: false
      }
    }
  ],
  &quot;bip9_softforks&quot;: {
  },
  &quot;bip135_forks&quot;: {
  }
}
</code></pre>
<h3>5. Stop infrastructure.</h3>
<p>Once you decide to call it a day, you can shut down your local environment by executing:</p>
<pre><code class="language-bash">./services stop
</code></pre>
<h1>Cleaning Up</h1>
<p>If you experience any issues, or would like to completely erase the current wallet and node containers, run the following script:</p>
<pre><code class="language-bash">./clean
</code></pre>
<p><strong>NOTE:</strong> this command may need to be ran with sudo while on linux</p>
<p><strong>WARNING:</strong> The 'clean' script is very destructive, so make sure you only use it when you want to <em>completely erase</em> the entire current instance of nodes and the wallet.</p>
<h1>Known Issues</h1>
<p>There are a few issues with this setup that could use improvement in the future.</p>
<ul>
<li>
<p>Currently, this setup relies on the built-in Electrscash indexing server included in the Bitcoin Unlimited node. This isn't an issue per se, but to test with other nodes (such as Bitcoin ABC, Bitcoin Cash Node, or bchd) it will be necessary to seperate the indexing server into a seperate container.</p>
</li>
<li>
<p>Currently blocks must be generated manually after transactions are made in order to mine them into blocks. The possibility of adding an automation to generate a block every few minutes could be a consideration to look into.</p>
</li>
</ul>

  </body>
</html>
